<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neuron - Neural Nexus Assistant</title>
    <link rel="stylesheet" href="chatbot.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="chatbot-button">
        <img src="resources/neuron.gif" alt="Neuron" class="neuron-icon">
        <div class="pulse-ring"></div>
    </div>

    <div class="chatbot-container hidden">
        <div class="chatbot-header">
            <div class="header-content">
                <img src="resources/neuron.gif" alt="Neuron" class="neuron-icon">
                <h3>Neuron</h3>
                <span class="status">Online</span>
            </div>
            <button class="close-chatbot">Ã—</button>
        </div>
        <div class="chatbot-messages">
            <div class="message bot">
                <p>Hello! I'm Neuron, your AI assistant for Neural Nexus. I can help you learn about different algorithms and navigate the platform. How can I assist you today?</p>
            </div>
        </div>
        <div class="chatbot-input">
            <input type="text" placeholder="Ask me anything..." id="user-input">
            <button id="send-button"><i class="fas fa-paper-plane"></i></button>
        </div>
        <div class="typing-indicator hidden">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>

    <script type="module">
        import { aiService } from './ai-service.js';

        function addMessage(message, isUser = false) {
            const messagesContainer = document.querySelector('.chatbot-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            messageDiv.innerHTML = `<p>${message}</p>`;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTypingIndicator() {
            document.querySelector('.typing-indicator').classList.remove('hidden');
        }

        function hideTypingIndicator() {
            document.querySelector('.typing-indicator').classList.add('hidden');
        }

        async function handleUserInput() {
            const input = document.getElementById('user-input');
            const message = input.value.trim();
            
            if (message) {
                // Disable input while processing
                input.disabled = true;
                document.getElementById('send-button').disabled = true;
                
                // Show user message
                addMessage(message, true);
                input.value = '';
                
                // Show typing indicator
                showTypingIndicator();
                
                try {
                    // Get AI response
                    const response = await aiService.getAIResponse(message);
                    
                    // Hide typing indicator and show response
                    hideTypingIndicator();
                    addMessage(response);
                } catch (error) {
                    console.error('Error:', error);
                    hideTypingIndicator();
                    addMessage('I apologize, but I encountered an error. Please try again.');
                } finally {
                    // Re-enable input
                    input.disabled = false;
                    document.getElementById('send-button').disabled = false;
                    input.focus();
                }
            }
        }

        // Event listeners
        document.getElementById('send-button').addEventListener('click', handleUserInput);
        document.getElementById('user-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleUserInput();
        });

        document.querySelector('.chatbot-button').addEventListener('click', () => {
            document.querySelector('.chatbot-button').classList.add('hidden');
            document.querySelector('.chatbot-container').classList.remove('hidden');
        });

        document.querySelector('.close-chatbot').addEventListener('click', () => {
            document.querySelector('.chatbot-container').classList.add('hidden');
            document.querySelector('.chatbot-button').classList.remove('hidden');
            // Clear conversation when closing
            aiService.clearConversation();
        });
    </script>
</body>
</html> 